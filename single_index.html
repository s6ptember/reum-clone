<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RAUM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a;
            color: white;
        }
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        /* Drawer animation */
        .drawer-enter {
            transform: translateX(100%);
        }
        .drawer-enter-active {
            transform: translateX(0);
            transition: transform 300ms ease-out;
        }
        .drawer-exit {
            transform: translateX(0);
        }
        .drawer-exit-active {
            transform: translateX(100%);
            transition: transform 300ms ease-in;
        }
        
        .fade-enter {
            opacity: 0;
        }
        .fade-enter-active {
            opacity: 1;
            transition: opacity 300ms ease-out;
        }
        .fade-exit {
            opacity: 1;
        }
        .fade-exit-active {
            opacity: 0;
            transition: opacity 300ms ease-in;
        }
    </style>
</head>
<body class="min-h-screen bg-[#1a1a1a] text-white font-sans antialiased selection:bg-white selection:text-black">

    <!-- Navbar -->
    <nav class="sticky top-0 z-40 w-full bg-[#1a1a1a] text-white border-b border-[#333]">
        <div class="flex items-center justify-between h-14 px-4 md:px-8 text-xs font-medium uppercase tracking-wider">
            <!-- Left: Logo -->
            <div class="flex-1">
                <button onclick="showListing()" class="text-2xl font-bold tracking-tighter hover:opacity-80 transition-opacity">
                    RAUM
                </button>
            </div>

            <!-- Center: Navigation -->
            <div class="hidden md:flex items-center space-x-12 flex-1 justify-center">
                <a href="#" class="hover:text-gray-400 transition-colors">Shop</a>
                <a href="#" class="hover:text-gray-400 transition-colors">Collections</a>
                <a href="#" class="hover:text-gray-400 transition-colors">About</a>
            </div>

            <!-- Right: Utilities -->
            <div class="flex items-center justify-end space-x-6 flex-1">
                <div class="hidden md:flex items-center text-[#666] cursor-pointer hover:text-white transition-colors">
                    [ <span class="text-white mx-1">DARK</span> / LIGHT ]
                </div>
                <button class="flex items-center space-x-1 hover:text-gray-400">
                    <span class="hidden md:inline">SEARCH</span>
                    <i data-lucide="search" class="w-4 h-4 md:hidden"></i>
                </button>
                <button class="flex items-center space-x-1 hover:text-gray-400">
                    <span class="hidden md:inline">ACCOUNT</span>
                    <i data-lucide="user" class="w-4 h-4 md:hidden"></i>
                </button>
                <button onclick="openCart()" class="flex items-center space-x-1 hover:text-gray-400">
                    <span class="hidden md:inline">BAG</span>
                    <span class="md:hidden"><i data-lucide="shopping-bag" class="w-4 h-4"></i></span>
                    <span id="cart-count-wrapper" class="ml-1 hidden">(<span id="cart-count">0</span>)</span>
                </button>
            </div>
        </div>
        
        <!-- Subheader -->
        <div class="flex items-center justify-between h-10 px-4 md:px-8 border-t border-[#333] bg-[#1a1a1a] text-xs text-white">
            <h1 class="uppercase tracking-widest font-semibold">All Clothing</h1>
        </div>
        
        <!-- Filter Bar -->
        <div class="flex items-center justify-between h-10 px-4 md:px-8 border-t border-[#333] bg-[#1a1a1a] text-[11px] text-[#999] uppercase tracking-wide">
            <div class="flex space-x-4 overflow-x-auto no-scrollbar whitespace-nowrap">
                <span class="text-white underline underline-offset-4 cursor-pointer">All</span>
                <span class="cursor-pointer hover:text-white">Outerwear</span>
                <span class="cursor-pointer hover:text-white">Knitwear</span>
                <span class="cursor-pointer hover:text-white">Tops</span>
                <span class="cursor-pointer hover:text-white">Bottoms</span>
                <span class="cursor-pointer hover:text-white">Dresses</span>
                <span class="cursor-pointer hover:text-white">Jumpsuits</span>
                <span class="cursor-pointer hover:text-white">Longewear</span>
            </div>
            <button class="flex items-center hover:text-white whitespace-nowrap ml-4">
                Filter & Sort +
            </button>
        </div>
    </nav>

    <main>
        <!-- Product Grid View -->
        <div id="product-grid-view" class="w-full bg-[#333] grid grid-cols-2 md:grid-cols-4 gap-px border-b border-[#333]">
            <!-- Products will be injected here -->
        </div>

        <!-- Product Detail View -->
        <div id="product-detail-view" class="hidden bg-[#1a1a1a] text-white min-h-screen flex flex-col md:flex-row">
            <!-- Left Column: Details (Sticky on Desktop) -->
            <div class="w-full md:w-1/3 md:h-[calc(100vh-theme(spacing.14))] md:sticky md:top-14 overflow-y-auto border-r border-[#333] flex flex-col">
                <!-- Breadcrumbs -->
                <div class="px-6 py-4 text-[10px] text-[#666] uppercase tracking-wide border-b border-[#333] bg-[#1a1a1a]">
                    <span onclick="showListing()" class="cursor-pointer hover:text-white">Catalog</span> / <span class="cursor-pointer hover:text-white" id="detail-category">Outerwear</span> / <span class="text-white" id="detail-name-breadcrumb">NAAZ BLAZER</span>
                </div>

                <div class="p-6 md:p-10 flex-1 flex flex-col">
                    <h1 class="text-2xl md:text-3xl font-medium tracking-tight mb-2 uppercase" id="detail-name">NAAZ BLAZER</h1>
                    <p class="text-sm text-gray-300 mb-8" id="detail-price">$319.00</p>

                    <div class="space-y-6 flex-1">
                        <div class="space-y-2">
                            <h3 class="text-[10px] text-[#999] uppercase tracking-widest font-semibold mb-3">Details</h3>
                            <ul class="text-[11px] text-[#ccc] space-y-1 list-disc pl-3 marker:text-[#666] leading-relaxed">
                                <li>Black color</li>
                                <li>Lightweight satin fabric</li>
                                <li>Relaxed fit</li>
                                <li>Notch lapels</li>
                                <li>Padded shoulders</li>
                                <li>Single welt breast pocket</li>
                                <li>Button cuffs</li>
                                <li>Front flap pockets</li>
                                <li>Front button closure</li>
                                <li>58% Viscose 42% Modal</li>
                            </ul>
                            <button class="text-[10px] text-[#666] underline mt-2 hover:text-white">Size guide</button>
                        </div>
                    </div>

                    <!-- Selectors -->
                    <div class="mt-12 space-y-6">
                        <div>
                            <span class="text-[10px] text-[#999] uppercase tracking-widest mr-2">Color:</span>
                            <span class="text-[11px] text-white underline">Black</span>
                            <div class="mt-2 w-6 h-6 border border-white bg-black"></div>
                        </div>

                        <div>
                            <div class="flex justify-between items-center mb-3">
                                <span class="text-[10px] text-[#999] uppercase tracking-widest">Select a size:</span>
                                <span class="text-[10px] text-[#666] underline cursor-pointer hover:text-white">Size guide</span>
                            </div>
                            <div class="flex space-x-6 border-b border-[#333] pb-2" id="size-selector">
                                <!-- Sizes injected via JS -->
                            </div>
                        </div>

                        <div class="space-y-3 pt-4">
                            <button 
                                onclick="addToCartFromDetail()"
                                class="w-full bg-white text-black py-3 text-xs font-bold uppercase tracking-widest hover:bg-gray-200 transition-colors"
                            >
                                Add to Bag
                            </button>
                            <button class="w-full border border-[#333] text-white py-3 text-xs font-bold uppercase tracking-widest hover:border-white transition-colors">
                                Add to Wishlist
                            </button>
                            <div class="flex justify-between pt-2">
                                <span class="text-[10px] text-[#666] underline cursor-pointer hover:text-white">Check in-store availability</span>
                                <span class="text-[10px] text-[#666] underline cursor-pointer hover:text-white">Need help?</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Details Tabs Footer (Fake) -->
                <div class="grid grid-cols-3 border-t border-[#333] text-[10px] uppercase font-bold tracking-wider text-center bg-[#1a1a1a]">
                    <div class="py-4 bg-white text-black cursor-pointer">Details</div>
                    <div class="py-4 text-[#666] border-l border-[#333] hover:text-white cursor-pointer">Size & Fit</div>
                    <div class="py-4 text-[#666] border-l border-[#333] hover:text-white cursor-pointer">Shipping & Returns</div>
                </div>
            </div>

            <!-- Right Column: Images & Complete Look -->
            <div class="w-full md:w-2/3 bg-[#222]">
                
                <!-- Main Image Carousel Area -->
                <div class="relative w-full">
                    <!-- Main large image -->
                    <div class="w-full aspect-[3/4] md:aspect-auto md:h-[80vh] relative bg-[#2a2a2a] overflow-hidden">
                        <img id="detail-image" src="" alt="Main view" class="w-full h-full object-cover object-center" />
                        
                        <!-- Navigation Arrows overlay -->
                        <button class="absolute left-4 top-1/2 -translate-y-1/2 p-2 text-[#333] hover:text-black">
                            <i data-lucide="chevron-left" class="w-8 h-8 font-thin"></i>
                        </button>
                        <button class="absolute right-4 top-1/2 -translate-y-1/2 p-2 text-[#333] hover:text-black">
                            <i data-lucide="chevron-right" class="w-8 h-8 font-thin"></i>
                        </button>
                    </div>

                    <!-- Thumbnails Overlay (Top Right) -->
                    <div class="absolute top-0 right-0 p-4 hidden md:flex space-x-2" id="detail-thumbnails">
                        <!-- Thumbnails injected via JS -->
                    </div>
                </div>

                <!-- Complete The Look Section -->
                <div class="border-t border-[#333] bg-[#1a1a1a]">
                    <div class="p-6 md:p-8">
                        <h3 class="text-lg md:text-xl font-medium uppercase mb-6">Complete The Look</h3>
                    </div>
                    <div class="grid grid-cols-2 border-t border-[#333] bg-[#333] gap-px" id="complete-the-look-grid">
                        <!-- Complete the look items injected via JS -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-[#1a1a1a] text-white border-t border-[#333]">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 p-8 md:p-12 border-b border-[#333]">
            
            <!-- Newsletter -->
            <div class="space-y-6">
                <p class="text-xl md:text-2xl font-light leading-tight max-w-md">
                    Stay informed of our newest arrivals, trends, and promotions.
                </p>
                <div class="flex flex-col space-y-2 max-w-md">
                    <div class="flex">
                        <input 
                            type="email" 
                            placeholder="Enter e-mail address" 
                            class="bg-transparent border-b border-[#666] py-3 text-sm w-full focus:outline-none focus:border-white placeholder-[#666]"
                        />
                        <button class="border border-[#666] px-8 py-2 text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-colors ml-4">
                            Sign Up
                        </button>
                    </div>
                    <div class="flex items-center space-x-2 mt-4">
                        <input type="checkbox" id="terms" class="accent-white bg-transparent border-gray-600 rounded-none w-3 h-3" />
                        <label for="terms" class="text-[10px] text-[#999] cursor-pointer">
                            I have read and accepted the <u class="hover:text-white">Terms and Conditions</u> and <u class="hover:text-white">Privacy Policy</u>.
                        </label>
                    </div>
                </div>
            </div>

            <!-- Links -->
            <div class="grid grid-cols-3 gap-8 text-[11px] uppercase tracking-wider text-[#999]">
                <div class="space-y-3">
                    <h4 class="text-white mb-4">Menu</h4>
                    <p class="cursor-pointer hover:text-white">Collections</p>
                    <p class="cursor-pointer hover:text-white">About</p>
                    <p class="cursor-pointer hover:text-white">Contact</p>
                </div>
                <div class="space-y-3">
                    <h4 class="text-white mb-4">Service</h4>
                    <p class="cursor-pointer hover:text-white">Shipping</p>
                    <p class="cursor-pointer hover:text-white">Returns</p>
                    <p class="cursor-pointer hover:text-white">FAQ</p>
                </div>
                <div class="space-y-3">
                    <h4 class="text-white mb-4">Social</h4>
                    <p class="cursor-pointer hover:text-white">Instagram</p>
                    <p class="cursor-pointer hover:text-white">Facebook</p>
                </div>
            </div>
        </div>
        
        <!-- Bottom Legal -->
        <div class="flex justify-between px-8 md:px-12 py-6 text-[10px] uppercase text-[#666]">
            <span>Terms & Conditions</span>
            <span>Privacy Policy</span>
        </div>

        <!-- Massive Logo -->
        <div class="w-full overflow-hidden leading-none select-none">
            <h1 class="text-[18vw] md:text-[22vw] font-bold text-white text-center tracking-tighter leading-[0.75] pb-4">
                RAUM
            </h1>
        </div>
    </footer>

    <!-- Cart Drawer -->
    <div id="cart-drawer" class="fixed inset-0 z-50 hidden justify-end">
        <!-- Backdrop -->
        <div 
            class="absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity" 
            onclick="closeCart()"
        ></div>

        <!-- Drawer -->
        <div class="relative w-full max-w-md h-full bg-[#1a1a1a] border-l border-[#333] flex flex-col shadow-2xl animate-in slide-in-from-right duration-300">
            
            <!-- Header -->
            <div class="flex items-center justify-between p-6 border-b border-[#333]">
                <div class="flex space-x-8 text-xs uppercase tracking-widest text-[#666]">
                    <span class="text-white hidden md:inline" id="cart-header-count">Your Bag [0]</span>
                </div>
                <div class="flex items-center justify-between w-full md:w-auto">
                    <span class="text-white text-lg md:hidden" id="cart-header-count-mobile">YOUR BAG [0]</span>
                    <button onclick="closeCart()" class="flex items-center text-xs text-white hover:text-gray-400 uppercase tracking-wider">
                        Close <i data-lucide="x" class="w-4 h-4 ml-1"></i>
                    </button>
                </div>
            </div>

            <!-- Items List -->
            <div class="flex-1 overflow-y-auto p-6 space-y-8" id="cart-items-container">
                <!-- Cart items injected via JS -->
            </div>

            <!-- Footer -->
            <div class="p-6 border-t border-[#333] bg-[#1a1a1a]">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs uppercase tracking-widest text-white">Subtotal:</span>
                    <span class="text-sm font-medium text-white" id="cart-subtotal">$0.00</span>
                </div>
                <p class="text-[10px] text-[#666] mb-6">Taxes and shipping calculated at checkout</p>
                <button class="w-full bg-white text-black py-4 text-xs font-bold uppercase tracking-widest hover:bg-gray-200 transition-colors">
                    Checkout
                </button>
            </div>

        </div>
    </div>

    <script>
        // --- Constants ---
        const MOCK_PRODUCTS = [
            {
                id: '1',
                name: 'MAVIS OVERSIZED TRENCH',
                price: 345.00,
                image: 'https://images.unsplash.com/photo-1591047139829-d91aecb6caea?q=80&w=1000&auto=format&fit=crop',
                category: 'Outerwear',
                isNew: false
            },
            {
                id: '2',
                name: 'NAICA LEATHER JACKET',
                price: 285.00,
                image: 'https://images.unsplash.com/photo-1551028919-ac66c9a3d683?q=80&w=1000&auto=format&fit=crop',
                category: 'Outerwear',
                isNew: true
            },
            {
                id: '3',
                name: 'ARLISE TRENCH COAT',
                price: 325.00,
                image: 'https://images.unsplash.com/photo-1544923246-77307dd654cb?q=80&w=1000&auto=format&fit=crop',
                category: 'Outerwear',
                isNew: false
            },
            {
                id: '4',
                name: 'ARBOR LEATHER JACKET',
                price: 275.00,
                image: 'https://images.unsplash.com/photo-1532453288672-3a27e9be9efd?q=80&w=1000&auto=format&fit=crop',
                category: 'Outerwear',
                isNew: false
            },
            {
                id: '5',
                name: 'PRILLY OVERSIZED SHIRT',
                price: 169.00,
                image: 'https://images.unsplash.com/photo-1564584217132-2271feaeb3c5?q=80&w=1000&auto=format&fit=crop',
                category: 'Tops',
                isNew: false
            },
            {
                id: '6',
                name: 'BEAUFILLE BAES CROP TOP',
                price: 470.00,
                image: 'https://images.unsplash.com/photo-1620799140408-ed5341cd2431?q=80&w=1000&auto=format&fit=crop',
                category: 'Tops',
                isNew: false
            },
            {
                id: '7',
                name: 'ROTATE OVERSIZED T-SHIRT',
                price: 90.00,
                image: 'https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?q=80&w=1000&auto=format&fit=crop',
                category: 'Tops',
                isNew: false
            },
            {
                id: '8',
                name: 'PELSO BARN JACKET',
                price: 295.00,
                image: 'https://images.unsplash.com/photo-1578932750294-f5075e85f44a?q=80&w=1000&auto=format&fit=crop',
                category: 'Outerwear',
                isNew: true
            },
            {
                id: '9',
                name: 'PEORIA SUEDE BLAZER',
                price: 278.00,
                image: 'https://images.unsplash.com/photo-1594223274512-ad4803739b7c?q=80&w=1000&auto=format&fit=crop',
                category: 'Blazers',
                isNew: false
            }
        ];

        const DETAIL_PRODUCT = {
            id: 'detail-1',
            name: 'NAAZ BLAZER',
            price: 319.00,
            image: 'https://images.unsplash.com/photo-1594223274512-ad4803739b7c?q=80&w=1000&auto=format&fit=crop',
            category: 'Blazers',
        };

        const COMPLETE_THE_LOOK = [
            {
                id: 'ctl-1',
                name: 'LOULOU STUDIO TANIA BAG',
                price: 333.00,
                salePrice: 665.00,
                isOnSale: true,
                image: 'https://images.unsplash.com/photo-1584917865442-de89df76afd3?q=80&w=1000&auto=format&fit=crop',
                isNew: false
            },
            {
                id: 'ctl-2',
                name: 'GIA BORGHINI BOOTS',
                price: 415.00,
                image: 'https://images.unsplash.com/photo-1605763240004-7e93b172d754?q=80&w=1000&auto=format&fit=crop',
                isNew: false
            }
        ];

        // --- State ---
        let cartItems = [
            {
                ...MOCK_PRODUCTS[8],
                id: 'mock-cart-1',
                quantity: 1,
                selectedSize: 'S',
                selectedColor: 'Dark Grey',
                name: 'TARVIS DOUBLE BREASTED BLAZER',
                price: 425.00
            },
            {
                ...MOCK_PRODUCTS[4],
                id: 'mock-cart-2',
                quantity: 1,
                selectedSize: 'XS',
                selectedColor: 'Black',
                name: 'SUVA SHEER SKIRT',
                price: 169.00
            },
            {
                ...MOCK_PRODUCTS[8],
                id: 'mock-cart-3',
                quantity: 1,
                selectedSize: 'XS',
                selectedColor: 'Charcoal',
                name: 'BROOKLYN BLAZER',
                price: 215.00
            }
        ];

        let selectedSize = 'M';
        const sizes = ['XS', 'S', 'M', 'L', 'XL'];

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            renderCart();
            renderDetail();
            lucide.createIcons();
        });

        // --- Rendering Functions ---
        function renderProducts() {
            const grid = document.getElementById('product-grid-view');
            grid.innerHTML = MOCK_PRODUCTS.map(product => `
                <div 
                    class="group relative bg-[#1a1a1a] flex flex-col cursor-pointer overflow-hidden"
                    onclick="showDetail('${product.id}')"
                >
                    <!-- Image Container -->
                    <div class="aspect-[3/4] overflow-hidden bg-[#222]">
                        <img 
                            src="${product.image}" 
                            alt="${product.name}" 
                            class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-90 group-hover:opacity-100"
                        />
                        
                        ${product.isNew ? `
                            <span class="absolute top-3 right-3 border border-[#666] text-white text-[10px] px-2 py-0.5 uppercase bg-[#1a1a1a]/80 backdrop-blur-sm">
                                New in
                            </span>
                        ` : ''}
                    </div>

                    <!-- Info Footer within the cell -->
                    <div class="absolute bottom-0 left-0 right-0 p-3 flex justify-between items-end bg-gradient-to-t from-black/80 to-transparent">
                        <h3 class="text-[10px] md:text-[11px] font-bold text-white uppercase tracking-wide truncate max-w-[70%]">
                            ${product.name}
                        </h3>
                        <span class="text-[10px] md:text-[11px] text-white font-medium">
                            $${product.price.toFixed(2)}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        function renderDetail() {
            // Populate Detail View with DETAIL_PRODUCT data
            document.getElementById('detail-name').innerText = DETAIL_PRODUCT.name;
            document.getElementById('detail-name-breadcrumb').innerText = DETAIL_PRODUCT.name;
            document.getElementById('detail-price').innerText = `$${DETAIL_PRODUCT.price.toFixed(2)}`;
            document.getElementById('detail-category').innerText = DETAIL_PRODUCT.category;
            document.getElementById('detail-image').src = DETAIL_PRODUCT.image;

            // Size Selector
            const sizeSelector = document.getElementById('size-selector');
            sizeSelector.innerHTML = sizes.map(size => `
                <button 
                    onclick="selectSize('${size}')"
                    class="text-xs w-6 text-center pb-1 transition-colors ${selectedSize === size ? 'text-white border-b border-white -mb-[9px]' : 'text-[#666] hover:text-white'}"
                >
                    ${size}
                </button>
            `).join('');

            // Thumbnails
            const thumbnails = document.getElementById('detail-thumbnails');
            thumbnails.innerHTML = [1, 2, 3].map(i => `
                <div class="w-20 aspect-[3/4] bg-[#111] border border-transparent hover:border-white cursor-pointer">
                    <img src="${DETAIL_PRODUCT.image}" alt="view ${i}" class="w-full h-full object-cover opacity-80 hover:opacity-100" />
                </div>
            `).join('');

            // Complete The Look
            const ctlGrid = document.getElementById('complete-the-look-grid');
            ctlGrid.innerHTML = COMPLETE_THE_LOOK.map(item => `
                <div class="group relative bg-[#1a1a1a] aspect-[3/4] cursor-pointer">
                    ${item.isOnSale ? `
                        <span class="absolute top-3 right-3 z-10 border border-[#666] text-[#666] text-[10px] px-2 py-0.5 uppercase">
                            Sale
                        </span>
                    ` : ''}
                    <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity" />
                    <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/90 to-transparent">
                        <div class="flex justify-between items-end">
                            <h4 class="text-[10px] font-bold uppercase tracking-wide text-white">${item.name}</h4>
                            <div class="text-[10px] text-white">
                                ${item.isOnSale && item.salePrice ? `
                                    <span class="line-through text-[#666] mr-2">$${item.salePrice.toFixed(2)}</span>
                                    <span class="text-white">$${item.price.toFixed(2)}</span>
                                ` : `
                                    <span>$${item.price.toFixed(2)}</span>
                                `}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderCart() {
            const container = document.getElementById('cart-items-container');
            const count = cartItems.length;
            
            // Update counts
            document.getElementById('cart-count').innerText = count;
            document.getElementById('cart-count-wrapper').classList.toggle('hidden', count === 0);
            document.getElementById('cart-header-count').innerText = `Your Bag [${count}]`;
            document.getElementById('cart-header-count-mobile').innerText = `YOUR BAG [${count}]`;

            // Calculate Subtotal
            const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('cart-subtotal').innerText = `$${subtotal.toFixed(2)}`;

            if (count === 0) {
                container.innerHTML = `
                    <div class="h-full flex flex-col items-center justify-center text-[#666]">
                        <p class="uppercase tracking-widest text-sm">Your bag is empty</p>
                    </div>
                `;
            } else {
                container.innerHTML = cartItems.map(item => `
                    <div class="flex gap-4 group">
                        <div class="w-24 aspect-[3/4] bg-[#222]">
                            <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover" />
                        </div>
                        <div class="flex-1 flex flex-col justify-between">
                            <div>
                                <div class="flex justify-between items-start">
                                    <h4 class="text-xs font-bold text-white uppercase tracking-wide max-w-[80%] leading-relaxed">
                                        ${item.name}
                                    </h4>
                                    <span class="text-xs text-white">$${item.price.toFixed(2)}</span>
                                </div>
                                
                                <div class="mt-4 space-y-1">
                                    <p class="text-[10px] text-[#999] uppercase tracking-wide">
                                        Size: <span class="text-white">${item.selectedSize}</span>
                                    </p>
                                    <p class="text-[10px] text-[#999] uppercase tracking-wide">
                                        Colour: <span class="text-white">${item.selectedColor}</span>
                                    </p>
                                </div>
                            </div>
                            
                            <div class="flex justify-between items-end">
                                <div class="flex items-center border border-[#333]">
                                    <button class="p-1 text-[#666] hover:text-white"><i data-lucide="minus" class="w-3 h-3"></i></button>
                                    <span class="px-2 text-[10px] text-white font-mono">${item.quantity}</span>
                                    <button class="p-1 text-[#666] hover:text-white"><i data-lucide="plus" class="w-3 h-3"></i></button>
                                </div>
                                <button 
                                    onclick="removeFromCart('${item.id}')"
                                    class="text-[10px] text-[#666] uppercase hover:text-white underline underline-offset-2"
                                >
                                    Remove
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                lucide.createIcons();
            }
        }

        // --- Actions ---
        function showListing() {
            document.getElementById('product-grid-view').classList.remove('hidden');
            document.getElementById('product-detail-view').classList.add('hidden');
            window.scrollTo(0, 0);
        }

        function showDetail(productId) {
            // In a real app, we would fetch the product by ID.
            // For this demo, we always show DETAIL_PRODUCT as per App.tsx logic.
            document.getElementById('product-grid-view').classList.add('hidden');
            document.getElementById('product-detail-view').classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function openCart() {
            document.getElementById('cart-drawer').classList.remove('hidden');
            document.getElementById('cart-drawer').classList.add('flex');
        }

        function closeCart() {
            document.getElementById('cart-drawer').classList.add('hidden');
            document.getElementById('cart-drawer').classList.remove('flex');
        }

        function addToCartFromDetail() {
            const newItem = {
                ...DETAIL_PRODUCT,
                id: Math.random().toString(),
                quantity: 1,
                selectedSize: selectedSize,
                selectedColor: 'Black'
            };
            cartItems.push(newItem);
            renderCart();
            openCart();
        }

        function removeFromCart(id) {
            cartItems = cartItems.filter(item => item.id !== id);
            renderCart();
        }

        function selectSize(size) {
            selectedSize = size;
            renderDetail(); // Re-render to update active class
        }

    </script>
</body>
</html>
