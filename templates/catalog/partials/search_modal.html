<!-- Search Modal -->
<div x-data="{ open: false }" @open-search-modal.window="open = true; $nextTick(() => $refs.searchInput.focus())"
    @close-search-modal.window="open = false" x-show="open" style="display: none;"
    class="fixed inset-0 z-50 flex items-start justify-center pt-20">

    <!-- Backdrop -->
    <div x-show="open" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
        class="absolute inset-0 bg-black/80 backdrop-blur-sm" @click="open = false"></div>

    <!-- Search Box -->
    <div x-show="open" x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 -translate-y-4" x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0"
        x-transition:leave-end="opacity-0 -translate-y-4" class="relative w-full max-w-3xl bg-transparent px-4">

        <form hx-get="{% url 'catalog:product_list' %}" hx-target="#main-content" hx-push-url="true"
            @submit.prevent="$el.requestSubmit(); open = false" class="relative">

            <input x-ref="searchInput" type="text" name="q"
                class="w-full bg-transparent border-b-2 border-[#333] text-2xl md:text-4xl font-light text-white py-4 focus:outline-none focus:border-white placeholder-[#333] uppercase tracking-wide"
                placeholder="Search products..." autocomplete="off">

            <button type="submit" class="absolute right-0 top-1/2 -translate-y-1/2 text-[#666] hover:text-white">
                <i data-lucide="arrow-right" class="w-8 h-8"></i>
            </button>
        </form>

        <div class="mt-4 text-[10px] text-[#666] uppercase tracking-widest">
            Press Enter to search
        </div>
    </div>

    <!-- Close Button -->
    <button @click="open = false" class="absolute top-8 right-8 text-[#666] hover:text-white z-50">
        <i data-lucide="x" class="w-8 h-8"></i>
    </button>
</div>